<div class="container py-5">
  <div class="banner text-center mb-5">
    <h1 class="display-5 fw-bold"><%= current_user.email %>'s meal plans</h1>
  </div>
  <div class="row mb-5">
  <div class="col-md-10 mx-auto">
    <div class="card border-0 shadow-sm p-4" style="border-radius: 12px; background: #f8f9fa;">
      <div class="row">
        <div class="col-8">
          <h5 class="fw-bold mb-3">Profile Information</h5>
          <ul class="list-unstyled mb-0">
            <li class="mb-2"><strong>Name:</strong> <%= @profile_information.name %></li>
            <li class="mb-2"><strong>Gender:</strong> <%= @profile_information.gender %></li>
            <li class="mb-2"><strong>DOB:</strong> <%= @profile_information.date_of_birth %></li>
            <li class="mb-2"><strong>Height:</strong> <%= @profile_information.height %></li>
            <li class="mb-2"><strong>Weight:</strong> <%= @profile_information.weight %></li>
            <li class="mb-2"><strong>Restrictions:</strong> <%= @profile_information.restrictions.presence || "None" %></li>
            <li class="mb-2"><strong>Conditions:</strong> <%= @profile_information.conditions.presence || "None" %></li>
          </ul>
        </div>
        <div class="col-4 d-flex flex-column justify-content-start gap-2">
          <%= button_to "Edit Profile", edit_user_profile_information_path(current_user),class: "btn btn-outline-primary btn-lg flex-fill",method: :get %>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="text-center mb-4">
    <%= link_to "New Meal Plan", new_user_meal_plan_path(current_user), class: "btn btn-success btn-lg" %>
  </div>
  <% @meal_plans.each do |plan| %>
    <div class="row mb-4">
      <div class="col-md-10 mx-auto">
        <div class="card border-0 shadow-sm p-4" style="border-radius: 12px; background: #f8f9fa;">
          <div class="row">
            <div class="col-8">
              <h5 class="fw-bold mb-3"><%= plan.plan_title %></h5>
              <ul class="list-unstyled mb-0">
                <li class="mb-2"><em>Plan goal:</em> <%= plan.goal %></li>
                <li class="mb-2"><em>Diet type:</em> <%= plan.diet %></li>
                <li class="mb-2"><em>Meals required:</em> <%= plan.meals_required %></li>
                <li class="mb-2"><em>Other considerations:</em> <%= plan.additional_preferences %></li>
                <li class="text-muted small">
                  <strong>System Prompt (TESTING):</strong> <%= plan.system_prompt %>
                </li>
              </ul>
            </div>
            <div class="col-4 d-flex flex-column justify-content-start gap-2">
              <%= button_to "View Meal Plan", user_meal_plan_chat_path(current_user.id, plan), class: "btn btn-primary btn-lg flex-fill", method: :get %>
              <%= button_to "Delete Meal Plan", user_meal_plan_path(current_user.id, plan), method: :delete, class: "btn btn-outline-danger", data: { confirm: "Delete this meal plan? All chats will be lost." } %>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>


</div
